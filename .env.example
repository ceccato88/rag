# =============================================================================
# CONFIGURAÇÃO DO SISTEMA RAG MULTI-AGENTE
# =============================================================================

# -----------------------------------------------------------------------------
# API KEYS (OBRIGATÓRIAS)
# -----------------------------------------------------------------------------

# Chave da API OpenAI - usada para GPT-4 (geração de respostas e re-ranking)
# Obtenha em: https://platform.openai.com/api-keys
# Formato: sk-proj-...
OPENAI_API_KEY=sk-proj-your-openai-key-here

# Chave da API Voyage AI - usada para gerar embeddings multimodais (texto + imagem)
# Obtenha em: https://www.voyageai.com/
# Formato: pa-...
VOYAGE_API_KEY=pa-your-voyage-key-here

# -----------------------------------------------------------------------------
# CONFIGURAÇÃO DO BANCO DE DADOS ASTRA DB (OBRIGATÓRIA)
# -----------------------------------------------------------------------------

# Endpoint do seu database Astra DB - encontre no painel do DataStax
# Formato: https://your-db-id-region.apps.astra.datastax.com
ASTRA_DB_API_ENDPOINT=https://your-db-id-region.apps.astra.datastax.com

# Token de aplicação do Astra DB - gere no painel do DataStax
# Formato: AstraCS:...
ASTRA_DB_APPLICATION_TOKEN=AstraCS:your-astra-token-here

# -----------------------------------------------------------------------------
# MODELOS DE IA
# -----------------------------------------------------------------------------
# Modelo LLM principal para RAG
RAG_LLM_MODEL=gpt-4o

# Modelo de embedding para texto
RAG_EMBEDDING_MODEL=voyage-3

# Modelo para sistema multi-agente
MULTIAGENT_MODEL=gpt-4o-mini

# Modelo de embedding multimodal
VOYAGE_MULTIMODAL_MODEL=voyage-multimodal-3

# -----------------------------------------------------------------------------
# LIMITES E TOKENS
# -----------------------------------------------------------------------------
# Número máximo de candidatos retornados na busca
MAX_CANDIDATES=5

# Máximo de tokens para re-ranking
MAX_TOKENS_RERANK=512

# Máximo de tokens para resposta final
MAX_TOKENS_ANSWER=2048

# Máximo de tokens para transformação de queries
MAX_TOKENS_QUERY_TRANSFORM=150

# Máximo de tokens para decomposição multi-agente
MAX_TOKENS_DECOMPOSITION=1000

# Dimensão dos embeddings Voyage
VOYAGE_EMBEDDING_DIM=1024

# Máximo de tokens por entrada
MAX_TOKENS_PER_INPUT=32000

# -----------------------------------------------------------------------------
# CACHE E PERFORMANCE
# -----------------------------------------------------------------------------
# Tamanho do cache de embeddings
EMBEDDING_CACHE_SIZE=500

# TTL do cache de embeddings (segundos)
EMBEDDING_CACHE_TTL=3600

# Tamanho do cache de respostas
RESPONSE_CACHE_SIZE=100

# TTL do cache de respostas (segundos)
RESPONSE_CACHE_TTL=1800

# Tamanho do cache global
GLOBAL_CACHE_SIZE=1000

# TTL do cache global (segundos)
GLOBAL_CACHE_TTL=3600

# -----------------------------------------------------------------------------
# TIMEOUTS E RETRIES
# -----------------------------------------------------------------------------
# Timeout para subagentes (segundos)
SUBAGENT_TIMEOUT=180.0

# Timeout para download de PDFs (segundos)
DOWNLOAD_TIMEOUT=30

# Número máximo de tentativas
MAX_RETRIES=3

# Delay entre tentativas (segundos)
RETRY_DELAY=1.0

# Threshold do circuit breaker
CIRCUIT_BREAKER_THRESHOLD=5

# Timeout do circuit breaker (segundos)
CIRCUIT_BREAKER_TIMEOUT=60

# -----------------------------------------------------------------------------
# SISTEMA MULTI-AGENTE
# -----------------------------------------------------------------------------
# Número máximo de subagentes
MAX_SUBAGENTS=3

# Execução paralela (true/false)
PARALLEL_EXECUTION=true

# Usar decomposição com LLM (true/false)
USE_LLM_DECOMPOSITION=true

# Limite de concorrência
CONCURRENCY_LIMIT=3

# -----------------------------------------------------------------------------
# INDEXING E PROCESSAMENTO
# -----------------------------------------------------------------------------
# URL padrão do PDF para processamento
DEFAULT_PDF_URL=https://arxiv.org/pdf/2501.13956

# Nome da collection no banco
COLLECTION_NAME=pdf_documents

# Tamanho do chunk para download (bytes)
DOWNLOAD_CHUNK_SIZE=8192

# Tamanho do lote para processamento
BATCH_SIZE=100

# Escala do pixmap para imagens
PIXMAP_SCALE=2

# Tokens por pixel para cálculo
TOKENS_PER_PIXEL=0.00178571

# Ratio de tokens por caractere
TOKEN_CHARS_RATIO=4

# Concorrência para processamento
PROCESSING_CONCURRENCY=5

# Idade máxima para limpeza (horas)
CLEANUP_MAX_AGE=24

# -----------------------------------------------------------------------------
# SISTEMA DE MEMÓRIA
# -----------------------------------------------------------------------------
# Tamanho máximo do cache L1
L1_CACHE_MAX_SIZE=1000

# Tamanho máximo do cache L2
L2_CACHE_MAX_SIZE=5000

# Número de shards para memória
MEMORY_SHARDS=4

# Estratégia de sharding
SHARD_STRATEGY=agent_hash

# Diretório para imagens extraídas dos PDFs
IMAGE_DIR=pdf_images

# -----------------------------------------------------------------------------
# CONFIGURAÇÃO DAS APIs DE PRODUÇÃO
# -----------------------------------------------------------------------------

# Host das APIs (0.0.0.0 para aceitar conexões externas, 127.0.0.1 apenas local)
API_HOST=0.0.0.0

# Porta da API RAG Simples
API_PORT_SIMPLE=8000

# Porta da API Multi-Agente
API_PORT_MULTIAGENT=8001

# Porta genérica (usado quando não especificado)
API_PORT=8000

# Número de workers para produção (1 para desenvolvimento, 4+ para produção)
API_WORKERS=1

# Ativar reload automático (apenas desenvolvimento)
# true = recarrega código automaticamente, false = modo produção
API_RELOAD=false

# Nível de log (debug, info, warning, error, critical)
API_LOG_LEVEL=info

# -----------------------------------------------------------------------------
# RATE LIMITING E SEGURANÇA
# -----------------------------------------------------------------------------

# Limite de requisições por minuto por IP
API_RATE_LIMIT=60

# Burst limit - requisições extras permitidas em picos
API_BURST_LIMIT=10

# Requerer API key para acesso (true/false)
API_KEY_REQUIRED=false

# API key para autenticação (quando API_KEY_REQUIRED=true)
API_KEY=your-api-key-here

# Secret para JWT tokens
JWT_SECRET=your-jwt-secret-here

# -----------------------------------------------------------------------------
# CACHE E REDIS (OPCIONAL)
# -----------------------------------------------------------------------------

# URL do Redis para cache (deixe vazio para usar cache em memória)
# Formato: redis://localhost:6379 ou redis://user:pass@host:port/db
REDIS_URL=redis://localhost:6379

# TTL padrão do cache em segundos (1 hora)
CACHE_TTL=3600

# Ativar cache distribuído (true/false)
ENABLE_DISTRIBUTED_CACHE=false

# -----------------------------------------------------------------------------
# MONITORAMENTO E OBSERVABILIDADE
# -----------------------------------------------------------------------------

# DSN do Sentry para monitoramento de erros (opcional)
SENTRY_DSN=your-sentry-dsn-here

# Ativar métricas do Prometheus (true/false)
ENABLE_PROMETHEUS=false

# Porta das métricas do Prometheus
PROMETHEUS_PORT=9090

# Ativar logs estruturados (true/false)
STRUCTURED_LOGS=false

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE PERFORMANCE PARA APIs
# -----------------------------------------------------------------------------

# Timeout para requisições das APIs (segundos)
API_REQUEST_TIMEOUT=300

# Tamanho máximo do payload (MB)
MAX_PAYLOAD_SIZE=10

# Conexões simultâneas máximas
MAX_CONNECTIONS=100

# Keep-alive timeout (segundos)
KEEP_ALIVE_TIMEOUT=5

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE WEBSOCKET (STREAMING)
# -----------------------------------------------------------------------------

# Timeout para conexões WebSocket (segundos)
WEBSOCKET_TIMEOUT=600

# Heartbeat interval para WebSocket (segundos)
WEBSOCKET_HEARTBEAT=30

# Máximo de conexões WebSocket simultâneas
MAX_WEBSOCKET_CONNECTIONS=50

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE BACKUP E STORAGE
# -----------------------------------------------------------------------------

# Diretório para logs das APIs
LOG_DIR=logs

# Diretório para arquivos temporários
TEMP_DIR=temp

# Rotação de logs (days)
LOG_RETENTION_DAYS=30

# Tamanho máximo de arquivo de log (MB)
MAX_LOG_SIZE=100

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES ESPECÍFICAS DO SISTEMA
# -----------------------------------------------------------------------------

# Threshold de similaridade para queries (0.0 a 1.0)
# Valores menores = mais resultados, valores maiores = mais precisão
SIMILARITY_THRESHOLD=0.7

# Número máximo de tentativas para operações com falha
MAX_RETRY_ATTEMPTS=3

# Delay base entre tentativas (segundos)
BASE_RETRY_DELAY=1.0

# Backoff máximo exponencial (segundos)
MAX_EXPONENTIAL_BACKOFF=30.0

# Backoff máximo linear (segundos)
MAX_LINEAR_BACKOFF=15.0

# Delay para retry imediato (segundos)
IMMEDIATE_RETRY_DELAY=0.1

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE AMBIENTE
# -----------------------------------------------------------------------------

# Ambiente atual (development, staging, production)
ENVIRONMENT=development

# Versão da aplicação
APP_VERSION=1.0.0

# Debug mode (true/false) - NUNCA true em produção
DEBUG=false

# Ativar CORS para desenvolvimento (true/false)
ENABLE_CORS=true

# Domínios permitidos para CORS (separados por vírgula)
CORS_ORIGINS=*

# -----------------------------------------------------------------------------
# VARIÁVEIS OPCIONAIS PARA CUSTOMIZAÇÃO
# -----------------------------------------------------------------------------

# Nome personalizado da collection (padrão: pdf_documents)
# COLLECTION_NAME=my_custom_collection

# URL personalizada do PDF (padrão: https://arxiv.org/pdf/2501.13956)
# DEFAULT_PDF_URL=https://example.com/my-document.pdf

# Modelo LLM personalizado para RAG (padrão: gpt-4o)
# RAG_LLM_MODEL=gpt-4o-mini

# Modelo para sistema multi-agente (padrão: gpt-4o-mini)
# MULTIAGENT_MODEL=gpt-4-turbo

# Modelo de embedding personalizado (padrão: voyage-3)
# RAG_EMBEDDING_MODEL=voyage-3-lite

# Modelo multimodal personalizado (padrão: voyage-multimodal-3)
# VOYAGE_MULTIMODAL_MODEL=voyage-multimodal-3
